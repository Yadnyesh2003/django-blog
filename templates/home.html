{% extends 'base.html' %}
{% block content %}

{% if hero_post %}
<div class="jumbotron p-3 p-md-5 text-white rounded bg-dark" style="background-image: url({{hero_post.featured_image.url}});background-blend-mode: overlay;background-size:cover;">
    <div class="hero-content">
      <h1 class="display-4">{{hero_post.title}}</h1>
      <p class="lead my-3">{{hero_post.short_description | truncatewords:20}}</p>
      <a href="{% url 'blogs' hero_post.slug %}" class="btn btn-warning btn-lg">
        Continue Reading →
      </a>
    </div>
</div>
{% endif %}


<h3 class="section-title">Featured Stories</h3>

<div class="row mb-4">
  {% for post in featured_posts %}
  <div class="col-md-6 mb-3">
    <div class="card marvel-card h-100">
      <div class="card-body">
        <a href="{% url 'blogs' post.slug %}">
          <h3 class="card-title">{{ post.title }}</h3>
        </a>
        <small class="text-muted d-block mb-2">
          {{ post.created_at|timesince }} ago · {{ post.author }}
        </small>
        <p class="card-text">
          {{ post.short_description|truncatewords:20 }}
        </p>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<nav aria-label="Featured Page navigation" class="mb-5">
    <ul class="pagination">
        {% if featured_posts.has_previous %}
        <li class="page-item">
            <a class="page-link text-danger" href="?featured_page={{ featured_posts.previous_page_number }}&page={{ posts.number }}">Previous</a>
        </li>
        {% endif %}

        <li class="page-item disabled">
            <span class="page-link bg-dark text-white border-dark">Page {{ featured_posts.number }} of {{ featured_posts.paginator.num_pages }}</span>
        </li>

        {% if featured_posts.has_next %}
        <li class="page-item">
            <a class="page-link text-danger" href="?featured_page={{ featured_posts.next_page_number }}&page={{ posts.number }}">Next</a>
        </li>
        {% endif %}
    </ul>
</nav>


<h3 class="section-title">Latest Articles</h3>

<div class="row">
  <div class="col-md-8">
    {% for post in posts %}
    <div class="card marvel-card mb-3">
      <div class="card-body">
        <a href="{% url 'blogs' post.slug %}">
          <h3 class="card-title">{{ post.title }}</h3>
        </a>
        <small class="text-muted d-block mb-2">
          {{ post.created_at|timesince }} ago · {{ post.author }}
        </small>
        <p class="card-text">
          {{ post.short_description|truncatewords:25 }}
        </p>
      </div>
    </div>
    {% endfor %}

    <nav aria-label="Page navigation" class="mt-4">
        <ul class="pagination">
            {% if posts.has_previous %}
            <li class="page-item">
                <a class="page-link text-danger" href="?page={{ posts.previous_page_number }}&featured_page={{ featured_posts.number }}">Previous</a>
            </li>
            {% endif %}

            <li class="page-item disabled">
                <span class="page-link bg-dark text-white border-dark">Page {{ posts.number }} of {{ posts.paginator.num_pages }}</span>
            </li>

            {% if posts.has_next %}
            <li class="page-item">
                <a class="page-link text-danger" href="?page={{ posts.next_page_number }}&featured_page={{ featured_posts.number }}">Next</a>
            </li>
            {% endif %}
        </ul>
    </nav>
  </div>

  <aside class="col-md-4">
    <div class="sidebar-box mb-4">
      <h4>{{ about.about_heading }}</h4>
      <p>{{ about.about_description }}</p>
    </div>

    {% if social_links %}
    <div class="sidebar-box">
      <h4>Follow Us</h4>
      <ul class="list-unstyled">
        {% for link in social_links %}
        <li>
          <a href="{{ link.link }}" target="_blank">
            {{ link.platform }}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
  </aside>
</div>

{% endblock %}